{"ast":null,"code":"import { ORDER_CREATE_FAIL, ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS, ORDER_DETAILS_FAIL, ORDER_DETAILS_REQUEST, ORDER_DETAILS_SUCCESS, ORDER_MINE_FAIL, ORDER_MINE_REQUEST, ORDER_MINE_SUCCESS, ORDER_PAY_FAIL, ORDER_PAY_REQUEST, ORDER_PAY_SUCCESS } from \"../constants/OrderConstant\";\nimport axios from \"../Axios\";\nimport { CART_EMPTY } from \"../constants/CartConstant\";\nexport const createdOrder = order => async (dispatch, getState) => {\n  dispatch({\n    type: ORDER_CREATE_REQUEST,\n    payload: order\n  });\n  try {\n    const {\n      userSignin: {\n        userInfo\n      }\n    } = getState();\n    const {\n      data\n    } = await axios.post('/api/orders', order, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      type: ORDER_CREATE_SUCCESS,\n      payload: data.order\n    });\n    dispatch({\n      type: CART_EMPTY\n    });\n    localStorage.removeItem(\"cartItems\");\n  } catch (error) {\n    dispatch({\n      type: ORDER_CREATE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const detailsOrder = orderId => async (dispatch, getState) => {\n  dispatch({\n    type: ORDER_DETAILS_REQUEST,\n    payload: orderId\n  });\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState();\n  try {\n    const {\n      data\n    } = await axios.get(`/api/orders/${orderId}`, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      type: ORDER_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    const message = error.response && error.response.data.message ? error.response.data.message : error.message;\n    dispatch({\n      type: ORDER_DETAILS_FAIL,\n      payload: message\n    });\n  }\n};\nexport const payOrder = (order, paymentResult) => async (dispatch, getState) => {\n  dispatch({\n    type: ORDER_PAY_REQUEST,\n    payload: {\n      order,\n      paymentResult\n    }\n  });\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState();\n  try {\n    const {\n      data\n    } = await axios.put(`/api/orders/${order._id}/pay`, paymentResult, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      type: ORDER_PAY_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    const message = error.response && error.response.data.message ? error.response.data.message : error.message;\n    dispatch({\n      type: ORDER_PAY_FAIL,\n      payload: message\n    });\n  }\n};\nexport const listOrderMine = () => async (dispatch, getState) => {\n  dispatch({\n    type: ORDER_MINE_REQUEST\n  });\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState();\n  try {\n    const {\n      data\n    } = await axios.get('/api/orders/mine', {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      type: ORDER_MINE_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    const message = error.response && error.response.data.message ? error.response.data.message : error.message;\n    dispatch({\n      type: ORDER_MINE_FAIL,\n      payload: message\n    });\n  }\n};","map":{"version":3,"names":["ORDER_CREATE_FAIL","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_DETAILS_FAIL","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_MINE_FAIL","ORDER_MINE_REQUEST","ORDER_MINE_SUCCESS","ORDER_PAY_FAIL","ORDER_PAY_REQUEST","ORDER_PAY_SUCCESS","axios","CART_EMPTY","createdOrder","order","dispatch","getState","type","payload","userSignin","userInfo","data","post","headers","Authorization","token","localStorage","removeItem","error","response","message","detailsOrder","orderId","get","payOrder","paymentResult","put","_id","listOrderMine"],"sources":["/Users/dr.mac/ankitBytechiperProject/frontend/src/actions/OrderAction.js"],"sourcesContent":["import { ORDER_CREATE_FAIL, ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS, ORDER_DETAILS_FAIL, ORDER_DETAILS_REQUEST, ORDER_DETAILS_SUCCESS, ORDER_MINE_FAIL, ORDER_MINE_REQUEST, ORDER_MINE_SUCCESS, ORDER_PAY_FAIL, ORDER_PAY_REQUEST, ORDER_PAY_SUCCESS } from \"../constants/OrderConstant\"\nimport axios from \"../Axios\"\nimport { CART_EMPTY } from \"../constants/CartConstant\";\n\nexport const createdOrder = (order) => async (dispatch, getState) => {\n    dispatch({\n        type: ORDER_CREATE_REQUEST,\n        payload: order\n    })\n\n    try{\n        const {userSignin: {userInfo}} = getState();\n        const {data} = await axios.post('/api/orders', order, {\n            headers: {\n                Authorization: `Bearer ${userInfo.token}`,\n            },\n        });\n\n        dispatch({\n            type: ORDER_CREATE_SUCCESS,\n            payload: data.order\n        });\n        dispatch({\n            type: CART_EMPTY\n        });\n\n        localStorage.removeItem(\"cartItems\");\n    }\n    catch(error){\n        dispatch({\n            type: ORDER_CREATE_FAIL,\n            payload: error.response && error.response.data.message\n             ? error.response.data.message\n             : error.message,\n        });\n    }\n}\n\n\nexport const detailsOrder = (orderId) => async (dispatch, getState) => {\n  dispatch({ type: ORDER_DETAILS_REQUEST, payload: orderId });\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = await axios.get(`/api/orders/${orderId}`, {\n      headers: { Authorization: `Bearer ${userInfo.token}` },\n    });\n    dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDER_DETAILS_FAIL, payload: message });\n  }\n};\n\n\n\nexport const payOrder = (order, paymentResult) => async (dispatch, getState) => {\n  dispatch({\n    type: ORDER_PAY_REQUEST,\n    payload: {order, paymentResult}\n  });\n\n  const {\n    userSignin: {userInfo}\n  } = getState();\n\n  try{\n    const {data} = await axios.put(`/api/orders/${order._id}/pay`, paymentResult, {\n      headers: { Authorization: `Bearer ${userInfo.token}` },\n    });\n    dispatch({ type: ORDER_PAY_SUCCESS, payload: data });\n\n  }\n  catch(error){\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDER_PAY_FAIL, payload: message });\n  }\n};\n\n\nexport const listOrderMine = () => async(dispatch, getState) => {\n  dispatch({\n    type: ORDER_MINE_REQUEST,\n  });\n  const {\n    userSignin: {userInfo}\n  } = getState();\n\n  try{\n    const {data} = await axios.get('/api/orders/mine', {\n      headers: { Authorization: `Bearer ${userInfo.token}` },\n    });\n    dispatch({type: ORDER_MINE_SUCCESS, payload: data});\n  }\n  catch(error){\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDER_MINE_FAIL, payload: message });\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}